#!/usr/bin/env ruby

require 'rubygems' unless respond_to?(:gem)
require 'svnignore'
require 'optparse'

options = { :file => '.svnignore', :recursive => true }
OptionParser.new do |opts|
  opts.banner = 'Usage: svnignore [options]'
  opts.on('-f', '--file', 'The file to parse ignore rules from. Default: .svnigore') { |file| options[:file] = file }
  opts.on('--no-recursive', 'Do not recursively look up files with ignore rules.') { |recursive| options[:recursive] = false }
end

path = [Dir.pwd]
path << '**' if options[:recursive]
path << options[:file]

Svnignore.ignore(Dir[File.join(*path)])